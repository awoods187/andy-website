---
/**
 * Blog Post Card Component
 *
 * Displays a blog post preview card with title, date, excerpt, and tags.
 * Used on the home page, blog listing page, and tag archive pages.
 *
 * @param title - The blog post title
 * @param date - Publication date as Date object
 * @param excerpt - Brief summary/preview text
 * @param slug - URL slug for the post
 * @param tags - Array of tag strings for categorization
 * @param showExcerpt - Optional flag to show/hide excerpt (default: true)
 */

interface Props {
  title: string;
  date: Date;
  excerpt: string;
  slug: string;
  tags: string[];
  showExcerpt?: boolean;
}

// Destructure props with default value for showExcerpt
const { title, date, excerpt, slug, tags, showExcerpt = true } = Astro.props;

// Format date in readable format (e.g., "October 21, 2024")
// Use UTC timezone to ensure dates match the frontmatter (avoids timezone conversion issues)
const formattedDate = new Intl.DateTimeFormat('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
  timeZone: 'UTC'
}).format(date);
---

<article class="mb-10 pb-10 border-b border-gray-200 last:border-b-0">
  <h2 class="font-sans text-2xl font-semibold mb-2">
    <a href={`/blog/${slug}`} class="text-black no-underline hover:opacity-70 transition-opacity">
      {title}
    </a>
  </h2>
  <time datetime={date.toISOString()} class="text-sm text-gray-500 block mb-3">
    {formattedDate}
  </time>
  {showExcerpt && (
    <p class="text-base leading-relaxed mb-3 text-gray-700">
      {excerpt}
    </p>
  )}
  {tags.length > 0 && (
    <div class="flex gap-2 flex-wrap">
      {tags.map(tag => (
        <a
          href={`/blog/tag/${tag}`}
          class="text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded no-underline hover:bg-gray-200 transition-colors"
        >
          {tag}
        </a>
      ))}
    </div>
  )}
</article>
